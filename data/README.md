# Data Directory

This directory stores all experimental data generated by QuartumSE:

## Directory Structure

```
data/
├── manifests/          # Provenance manifests (JSON)
├── shots/              # Raw measurement data (Parquet)
├── reports/            # Generated HTML/PDF reports
└── README.md
```

## Manifests (`manifests/`)

JSON files containing complete experiment provenance:

- **Circuit metadata**: Hash, gate counts, depth, qubit count
- **Backend calibration**: T1/T2 times, readout errors, timestamp
- **Mitigation config**: Techniques applied (MEM, ZNE, etc.) and parameters
- **Resource usage**: Total shots, execution time
- **Reproducibility info**: Random seeds, library versions (Qiskit, Python)
- **Results summary**: Observable expectation values and confidence intervals

**Filename format**: `{experiment_id}.json` (32-char SHA-256 prefix)

**Example**:
```bash
data/manifests/a3f2b8c9d1e4f5g6h7i8j9k0l1m2n3o4.json
```

## Shot Data (`shots/`)

Parquet files with raw quantum measurement outcomes:

**Schema**:
| Column | Type | Description |
|--------|------|-------------|
| `shot_id` | int64 | Sequential shot number (0 to shadow_size-1) |
| `measurement_basis` | string | Pauli basis string (e.g., "XYZ" for 3 qubits) |
| `measurement_outcome` | string | Bitstring outcome (e.g., "101") |

**Diagnostics computed from shot data**:
- **Basis distribution**: Frequency of each Pauli basis (X/Y/Z per qubit)
- **Bitstring histogram**: Top 10 most frequent outcome patterns
- **Qubit marginals**: P(0) and P(1) for each qubit

**Filename format**: `{experiment_id}.parquet`

**Replay capability**: Manifests reference shot files, enabling re-computation of new observables without backend re-execution.

## Reports (`reports/`)

Human-readable HTML (and optionally PDF) reports:

- Experiment summary with metadata
- Circuit visualization and gate composition
- Mitigation techniques applied
- Shot diagnostics (basis distribution, histograms, marginals)
- Backend calibration snapshot
- Reproducibility checklist

**Filename format**: `{experiment_id}_report.html`

**Generate report**:
```bash
quartumse report data/manifests/{experiment_id}.json --output report.html
```

Or programmatically:
```python
from quartumse.reporting import ReportGenerator

report = ReportGenerator.from_manifest_file("data/manifests/{exp_id}.json")
report.to_html("report.html")  # or report.to_pdf("report.pdf")
```

## File Retention

- **Manifests**: Keep indefinitely (small JSON files)
- **Shot data**: Archive after validation (large Parquet files)
- **Reports**: Regenerate from manifests as needed

## Reproducibility

To reproduce an experiment:

1. Load the manifest: `manifest = ProvenanceManifest.from_json("data/manifests/{id}.json")`
2. Verify shot file exists: `manifest.validate(require_shot_file=True)`
3. Replay with new observables: `estimator.replay_from_manifest(manifest_path, observables=[...])`

No backend access required for replay - all data is preserved in Parquet.

---

**Storage estimates**:
- Manifest: ~5-10 KB per experiment
- Shot data: ~100 KB per 1000 shots (3-qubit system)
- Report: ~50-100 KB (HTML with inline CSS)

For a typical Phase 1 experiment (500 shots, 3 qubits):
- Total: ~150-200 KB per experiment
- 100 experiments: ~15-20 MB
